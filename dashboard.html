<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F1 Manager - Mi Escuder√≠a</title>
    <link rel="stylesheet" href="modern.css">
    <style>
        /* Hamburger menu for mobile responsiveness */
        .hamburger-btn { display: none; flex-direction: column; gap: 5px; background: none; border: none; cursor: pointer; padding: 8px; z-index: 101; }
        .hamburger-btn span { width: 28px; height: 3px; background-color: var(--text-primary); border-radius: 2px; transition: all 0.3s ease; }
        .hamburger-btn.active span:nth-child(1) { transform: rotate(45deg) translate(10px, 10px); }
        .hamburger-btn.active span:nth-child(2) { opacity: 0; }
        .hamburger-btn.active span:nth-child(3) { transform: rotate(-45deg) translate(7px, -7px); }
        @media (max-width: 768px) {
            .hamburger-btn { display: flex; }
            .nav-links { display: none; position: fixed; top: 70px; left: 0; right: 0; flex-direction: column; background: linear-gradient(180deg, rgba(23, 23, 25, 0.99), rgba(15, 15, 18, 0.99)); padding: 20px; gap: 12px; list-style: none; z-index: 100; border-bottom: 1px solid var(--border-color); backdrop-filter: blur(15px); box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5); max-height: calc(100vh - 70px); overflow-y: auto; }
            .nav-links.active { display: flex; }
            .nav-links li { padding: 12px 0; border-bottom: 1px solid var(--border-color); }
            .nav-links li:last-child { border-bottom: none; }
            .nav-links a { display: block; padding: 8px; font-size: 0.95rem; }
            .nav-auth { width: 100%; gap: 8px; flex-wrap: wrap; order: -1; }
            .nav-auth button { flex: 1; min-width: 120px; font-size: 0.85rem; padding: 10px 16px; }
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="nav-brand">
            <strong>‚ö° F1 MANAGER</strong>
        </div>
        <button class="hamburger-btn" id="hamburger-btn" onclick="toggleMenu()"><span></span><span></span><span></span></button>
        <ul class="nav-links" id="nav-links">
            <li><a href="index.html">Inicio</a></li>
            <li><a href="equipos.html">Equipos</a></li>
            <li><a href="calendario.html">Calendario</a></li>
            <li><a href="clasificacion.html">Clasificaci√≥n</a></li>
            <li><a href="media.html">Media</a></li>
            <li><a href="dashboard.html" class="active">Mi Equipo</a></li>
        </ul>
        <div class="nav-auth">
            <button id="btnLogout" class="btn-solid" onclick="logout()">Cerrar Sesi√≥n</button>
        </div>
    </nav>
    <script>
        function toggleMenu() { const h = document.getElementById('hamburger-btn'); const n = document.getElementById('nav-links'); h.classList.toggle('active'); n.classList.toggle('active'); }
        document.querySelectorAll('.nav-links a').forEach(link => { link.addEventListener('click', () => { document.getElementById('hamburger-btn').classList.remove('active'); document.getElementById('nav-links').classList.remove('active'); }); });
    </script>

    <main class="container" style="padding: 40px 20px;">

        <!-- SECCI√ìN 1: INFORMACI√ìN DEL EQUIPO -->
        <div class="card" style="margin-bottom: 40px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; align-items: center;">
                <div id="team-car-display" style="text-align: center; height: 200px; display: flex; align-items: center; justify-content: center;">
                    <span style="color: var(--text-secondary);">Cargando coche...</span>
                </div>
                <div>
                    <h1 id="team-name" style="margin: 0 0 20px 0; font-size: 2.5rem;">Cargando...</h1>
                    <div class="stats-grid" style="grid-template-columns: repeat(2, 1fr); gap: 15px;">
                        <div style="background-color: var(--bg-tertiary); padding: 15px; border-radius: 8px;">
                            <span style="color: var(--text-secondary); font-size: 0.9rem;">PRESUPUESTO</span>
                            <h3 id="team-budget" style="margin: 5px 0 0 0;">$0</h3>
                        </div>
                        <div style="background-color: var(--bg-tertiary); padding: 15px; border-radius: 8px;">
                            <span style="color: var(--text-secondary); font-size: 0.9rem;">PUNTOS</span>
                            <h3 id="team-points" style="margin: 5px 0 0 0;">0</h3>
                        </div>
                        <div style="background-color: var(--bg-tertiary); padding: 15px; border-radius: 8px;">
                            <span style="color: var(--text-secondary); font-size: 0.9rem;">VICTORIAS</span>
                            <h3 id="team-wins" style="margin: 5px 0 0 0;">0</h3>
                        </div>
                        <div style="background-color: var(--bg-tertiary); padding: 15px; border-radius: 8px;">
                            <span style="color: var(--text-secondary); font-size: 0.9rem;">CAMPEONATOS</span>
                            <h3 id="team-championships" style="margin: 5px 0 0 0;">0</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECCI√ìN 2: PILOTOS DEL EQUIPO -->
        <h2 style="margin: 50px 0 25px 0; border-bottom: 2px solid var(--accent); padding-bottom: 10px;">üë• Mi Alineaci√≥n</h2>
        <div id="drivers-container" class="drivers-dashboard" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 40px;">
            <p style="text-align:center; color: var(--text-secondary); grid-column: 1/-1;">Cargando pilotos...</p>
        </div>

        <!-- SECCI√ìN 3: NOTIFICACIONES/AVISOS -->
        <h2 style="margin: 50px 0 25px 0; border-bottom: 2px solid var(--accent); padding-bottom: 10px;">üì¨ Bandeja de Avisos</h2>
        <div class="card" style="margin-bottom: 40px;">
            <div id="notifications-box" style="min-height: 200px; max-height: 400px; overflow-y: auto;">
                <p style="text-align:center; color: var(--text-secondary);">Sin notificaciones</p>
            </div>
        </div>

        <!-- SECCI√ìN 4: MEJORAS DEL COCHE -->
        <h2 style="margin: 50px 0 25px 0; border-bottom: 2px solid var(--accent); padding-bottom: 10px;">üîß I+D y Mejoras</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 40px;">
            
            <div class="card">
                <h3 style="margin-top: 0; color: var(--accent);">Chasis y Aerodin√°mica</h3>
                <div style="margin: 20px 0;">
                    <p style="margin: 0 0 10px 0; color: var(--text-secondary);">Nivel actual: <strong id="aero-level">0</strong>/5</p>
                    <div style="background-color: var(--bg-tertiary); border-radius: 6px; height: 20px; overflow: hidden; margin-bottom: 15px;">
                        <div id="aero-progress" style="background: linear-gradient(90deg, #ff2e3f, #ff5a70); height: 100%; width: 0%; transition: width 0.3s ease;"></div>
                    </div>
                    <p style="font-size: 0.9rem; margin: 0 0 15px 0;">Mejora la aerodin√°mica para mayor velocidad en recta.</p>
                    <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 10px;">Costo: $5,000,000</p>
                    <button class="btn-solid" id="btn-aero" style="width: 100%;">Desarrollar Mejora</button>
                </div>
            </div>

            <div class="card">
                <h3 style="margin-top: 0; color: var(--accent);">Unidad de Potencia (Motor)</h3>
                <div style="margin: 20px 0;">
                    <p style="margin: 0 0 10px 0; color: var(--text-secondary);">Nivel actual: <strong id="motor-level">0</strong>/5</p>
                    <div style="background-color: var(--bg-tertiary); border-radius: 6px; height: 20px; overflow: hidden; margin-bottom: 15px;">
                        <div id="motor-progress" style="background: linear-gradient(90deg, #00aaff, #00ddff); height: 100%; width: 0%; transition: width 0.3s ease;"></div>
                    </div>
                    <p style="font-size: 0.9rem; margin: 0 0 15px 0;">Mejora la potencia del motor para m√°s rendimiento.</p>
                    <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 10px;">Costo: $7,500,000</p>
                    <button class="btn-solid" id="btn-motor" style="width: 100%;">Desarrollar Mejora</button>
                </div>
            </div>

        </div>

        <!-- SECCI√ìN 5: INVESTIGACI√ìN DE RIVALES -->
        <h2 style="margin: 50px 0 25px 0; border-bottom: 2px solid var(--accent); padding-bottom: 10px;">üîé Investigaci√≥n de Rivales</h2>
        <div class="card" style="margin-bottom: 40px;">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                
                <!-- Opci√≥n 1: Investigar Piloto -->
                <div style="padding: 20px; background-color: var(--bg-tertiary); border-radius: 8px; border: 1px solid var(--border-color);">
                    <h3 style="margin-top: 0; color: var(--accent);">üìä Investigar Piloto</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 15px;">Conoce el ritmo y agresividad de un piloto rival.</p>
                    <label style="display: block; margin-bottom: 10px;">Selecciona un piloto:</label>
                    <select id="select-pilot-research" style="margin-bottom: 15px;">
                        <option value="">-- Seleccionar piloto --</option>
                    </select>
                    <button class="btn-outline" id="btn-research-pilot" style="width: 100%;">Investigar</button>
                </div>

                <!-- Opci√≥n 2: Investigar Mejora del Coche -->
                <div style="padding: 20px; background-color: var(--bg-tertiary); border-radius: 8px; border: 1px solid var(--border-color);">
                    <h3 style="margin-top: 0; color: var(--accent);">‚öôÔ∏è √öltima Mejora Rival</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 15px;">Descubre la √∫ltima mejora que hizo tu rival.</p>
                    <label style="display: block; margin-bottom: 10px;">Selecciona un equipo:</label>
                    <select id="select-team-upgrade" style="margin-bottom: 15px;">
                        <option value="">-- Seleccionar equipo --</option>
                    </select>
                    <button class="btn-outline" id="btn-research-upgrade" style="width: 100%;">Investigar</button>
                </div>

                <!-- Opci√≥n 3: Investigar Nivel de Componente -->
                <div style="padding: 20px; background-color: var(--bg-tertiary); border-radius: 8px; border: 1px solid var(--border-color);">
                    <h3 style="margin-top: 0; color: var(--accent);">üî© Nivel de Componente</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 15px;">Compara el nivel de un componente del rival.</p>
                    <label style="display: block; margin-bottom: 10px;">Selecciona un equipo:</label>
                    <select id="select-team-component" style="margin-bottom: 15px;">
                        <option value="">-- Seleccionar equipo --</option>
                    </select>
                    <label style="display: block; margin-bottom: 10px; margin-top: 10px;">Componente:</label>
                    <select id="select-component-type" style="margin-bottom: 15px;">
                        <option value="aero">Aerodin√°mica</option>
                        <option value="motor">Motor</option>
                    </select>
                    <button class="btn-outline" id="btn-research-component" style="width: 100%;">Investigar</button>
                </div>

            </div>
        </div>

        <a href="reglas.html" class="btn-outline" style="display: inline-block; margin-top: 20px;">üìã Ver Reglas de Juego</a>

    </main>

    <footer style="text-align: center; padding: 30px 20px; border-top: 1px solid var(--border-color); color: var(--text-secondary); margin-top: 60px;">
        <p>&copy; 2024-2026 F1 Manager. Todos los derechos reservados.</p>
    </footer>

    <script type="module" src="dashboard.js"></script>
    <script type="module">
        import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";
        window.logout = async function() {
            const auth = getAuth();
            await signOut(auth);
            window.location.href = "index.html";
        }
    </script>
</body>
</html>