<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F1 Manager - Panel de Control MAX</title>
    <link rel="stylesheet" href="modern.css">
    <link rel="stylesheet" href="mobile-responsive.css">
    <style>
        /* Hamburger menu for mobile responsiveness */
        .hamburger-btn { display: none; flex-direction: column; gap: 3px; background: none; border: none; cursor: pointer; padding: 4px 6px; z-index: 101; }
        .hamburger-btn span { width: 22px; height: 2px; background-color: var(--text-primary); border-radius: 2px; transition: all 0.3s ease; }
        .hamburger-btn.active span:nth-child(1) { transform: rotate(45deg) translate(8px, 8px); }
        .hamburger-btn.active span:nth-child(2) { opacity: 0; }
        .hamburger-btn.active span:nth-child(3) { transform: rotate(-45deg) translate(6px, -6px); }
        @media (max-width: 768px) {
            .hamburger-btn { display: flex; }
            .nav-links { display: none; position: fixed; top: 60px; left: 0; right: 0; flex-direction: column; background: linear-gradient(180deg, rgba(23, 23, 25, 0.99), rgba(15, 15, 18, 0.99)); padding: 8px 0; gap: 0; list-style: none; z-index: 100; border-bottom: 1px solid var(--border-color); backdrop-filter: blur(15px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5); max-height: calc(100vh - 60px); overflow-y: auto; }
            .nav-links.active { display: flex; }
            .nav-links li { padding: 0; border-bottom: 1px solid var(--border-color); }
            .nav-links li:last-child { border-bottom: none; }
            .nav-links a { display: block; padding: 10px 15px; font-size: 0.9rem; }
            .nav-auth { width: 100%; gap: 6px; flex-wrap: wrap; order: -1; }
            .nav-auth button { flex: 1; min-width: 100px; font-size: 0.75rem; padding: 8px 12px; }
        }
    </style>
</head>
<body>

    <nav class="navbar thin-navbar">
        <div class="nav-brand"><strong>⚡ F1 MANAGER</strong> <span style="color:var(--accent); font-size:0.8rem; margin-left:10px;">[PANEL ADMIN]</span></div>
        <button class="hamburger-btn" id="hamburger-btn" aria-label="Menú" onclick="toggleMenu()"><span></span><span></span><span></span></button>
        <ul class="nav-links" id="nav-links">
            <li><a href="index.html">Inicio</a></li>
            <li><a href="equipos.html">Equipos</a></li>
            <li><a href="calendario.html">Calendario</a></li>
            <li><a href="clasificacion.html">Clasificación</a></li>
            <li><a href="pilotos.html">Pilotos</a></li>
        </ul>
    </nav>
    <script>
        function toggleMenu() { const h = document.getElementById('hamburger-btn'); const n = document.getElementById('nav-links'); h.classList.toggle('active'); n.classList.toggle('active'); }
        document.querySelectorAll('.nav-links a').forEach(link => { link.addEventListener('click', () => { document.getElementById('hamburger-btn').classList.remove('active'); document.getElementById('nav-links').classList.remove('active'); }); });
    </script>

    <div class="admin-layout">
        
        <aside class="admin-sidebar">
            <button class="admin-tab-btn active" data-target="panel-mensajes">1. Comunicados</button>
            <button class="admin-tab-btn" data-target="panel-equipos">2. Equipos</button>
            <button class="admin-tab-btn" data-target="panel-pilotos">3. Pilotos</button>
            <button class="admin-tab-btn" data-target="panel-carreras">4. Carreras y Resultados</button>
            <button class="admin-tab-btn" data-target="panel-media">5. Media Center</button>
            <button class="admin-tab-btn" data-target="panel-actividad">6. Actividad de Equipos</button>
        </aside>

        <main class="admin-content">

            <section id="panel-mensajes" class="admin-panel active">
                <h2>Enviar Comunicado Oficial</h2>
                <div class="card">
                    <form id="form-mensaje">
                        <label>De quién:</label>
                        <select id="msg-remitente" required>
                            <option value="Admin">Admin</option>
                            <option value="FIA">FIA</option>
                        </select>
                        
                        <label>A quién (Destinatario):</label>
                        <select id="msg-destinatario" required>
                            <option value="todos">A todos los equipos</option>
                        </select>

                        <label>Mensaje:</label>
                        <textarea id="msg-texto" rows="4" placeholder="Escribe el comunicado..." required></textarea>

                        <button type="submit" class="btn-solid" style="width: 100%; margin-top: 15px;">Enviar Comunicado</button>
                    </form>
                </div>
            </section>

            <section id="panel-equipos" class="admin-panel">
                <div style="display:flex; justify-content:space-between; margin-bottom: 20px;">
                    <h2>Gestión de Equipos</h2>
                    <button class="btn-outline" onclick="abrirModal('modal-equipo')">+ Crear Equipo</button>
                </div>
                <div class="table-container">
                    <table class="admin-table">
                        <thead><tr><th>Logo</th><th>Nombre</th><th>Color</th><th>Acciones</th></tr></thead>
                        <tbody id="tabla-equipos"></tbody>
                    </table>
                </div>
            </section>

            <section id="panel-pilotos" class="admin-panel">
                <div style="display:flex; justify-content:space-between; margin-bottom: 20px;">
                    <h2>Gestión de Pilotos</h2>
                    <button class="btn-outline" onclick="abrirModal('modal-piloto')">+ Crear Piloto</button>
                </div>
                <div class="table-container">
                    <table class="admin-table">
                        <thead><tr><th>Dorsal</th><th>Nombre</th><th>Apellidos</th><th>Moral</th><th>País</th><th>Acciones</th></tr></thead>
                        <tbody id="tabla-pilotos"></tbody>
                    </table>
                </div>
            </section>

            <section id="panel-carreras" class="admin-panel">
                <div style="display:flex; justify-content:space-between; margin-bottom: 20px;">
                    <h2>Gestión del Calendario</h2>
                    <button class="btn-outline" onclick="abrirModal('modal-carrera')">+ Crear Carrera</button>
                </div>
                <div class="table-container">
                    <table class="admin-table">
                        <thead><tr><th>Ronda</th><th>Gran Premio</th><th>Estado</th><th>Acciones</th></tr></thead>
                        <tbody id="tabla-carreras"></tbody>
                    </table>
                </div>
            </section>

            <section id="panel-media" class="admin-panel">
                <div style="display:flex; justify-content:space-between; margin-bottom: 20px;">
                    <h2>Media Center</h2>
                    <button class="btn-outline" onclick="abrirModal('modal-media')">+ Crear Publicación</button>
                </div>
                <div class="table-container">
                    <table class="admin-table">
                        <thead><tr><th>Tipo</th><th>Título</th><th>Fecha</th><th>Acciones</th></tr></thead>
                        <tbody id="tabla-media"></tbody>
                    </table>
                </div>
            </section>

            <section id="panel-actividad" class="admin-panel">
                <h2>Registro de Actividad y Peticiones</h2>
                <p class="text-muted">Aquí verás todo lo que hacen los mánagers en sus equipos.</p>
                <div id="lista-actividad" class="media-grid" style="display: flex; flex-direction: column; gap: 15px; margin-top: 20px;">
                    <p class="text-muted">Cargando registros...</p>
                </div>
            </section>

        </main>
    </div>

    <div id="modal-equipo" class="modal-overlay">
        <div class="modal-content card">
            <h3 id="titulo-modal-equipo">Crear Equipo</h3>
            <form id="form-equipo">
                <input type="hidden" id="eq-id">
                <label>Nombre del Equipo</label><input type="text" id="eq-nombre" required>
                <label>Color (Hex)</label><input type="color" id="eq-color" style="height:40px; padding:0;" required>
                <label>URL Foto del Coche</label><input type="text" id="eq-coche" placeholder="Ej: assets/img/coche.png">
                <label>URL Logo del Equipo</label><input type="text" id="eq-logo" placeholder="Ej: assets/img/logo.png">
                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button type="submit" class="btn-solid" style="flex:1;">Guardar</button>
                    <button type="button" class="btn-outline" onclick="cerrarModal('modal-equipo')" style="flex:1;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="modal-piloto" class="modal-overlay">
        <div class="modal-content card">
            <h3 id="titulo-modal-piloto">Crear Piloto</h3>
            <form id="form-piloto">
                <input type="hidden" id="pil-id">
                <label>Nombre</label><input type="text" id="pil-nombre" required>
                <label>Apellidos</label><input type="text" id="pil-apellido" placeholder="Ej: Pérez">
                <label>Número (Dorsal)</label><input type="number" id="pil-numero" required>
                <label>País (Siglas o Nombre)</label><input type="text" id="pil-pais" required>
                <label>Edad</label><input type="number" id="pil-edad" min="18" max="50" placeholder="Ej: 25">
                <label>Ritmo (0-100)</label><input type="number" id="pil-ritmo" min="0" max="100" placeholder="Ej: 85">
                <label>Agresividad (0-100)</label><input type="number" id="pil-agresividad" min="0" max="100" placeholder="Ej: 75">
                <label>Moral (0-100)</label>
                <select id="pil-moral" required>
                    <option value="">Selecciona una opción</option>
                    <option value="Baja">Baja</option>
                    <option value="Normal">Normal</option>
                    <option value="Alta">Alta</option>
                </select>
                <label>Equipo Actual</label>
                <select id="pil-equipo">
                    <option value="">Ninguno (Agente Libre)</option>
                </select>
                <label>URL Foto (Opcional)</label><input type="text" id="pil-foto" placeholder="Ej: assets/img/piloto.png">
                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button type="submit" class="btn-solid" style="flex:1;">Guardar</button>
                    <button type="button" class="btn-outline" onclick="cerrarModal('modal-piloto')" style="flex:1;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="modal-carrera" class="modal-overlay">
        <div class="modal-content card" style="max-height: 90vh; overflow-y: auto; max-width: 600px;">
            <h3 id="titulo-modal-carrera">Crear / Editar Carrera</h3>
            <form id="form-carrera">
                <input type="hidden" id="car-id">
                
                <h4 style="color:var(--text-secondary); margin-top:10px;">Datos Básicos</h4>
                <div style="display:flex; gap:10px;">
                    <div style="flex:1;"><label>Ronda</label><input type="number" id="car-ronda" required></div>
                    <div style="flex:2;"><label>Nombre GP</label><input type="text" id="car-nombre" required placeholder="Ej: GP Bahréin"></div>
                </div>
                <label>Circuito</label><input type="text" id="car-circuito" required>
                <label>Fecha y Hora</label><input type="datetime-local" id="car-fecha" required>

                <h4 style="color:var(--text-secondary); margin-top:20px; border-top:1px solid var(--border-color); padding-top:10px;">Puntos Extra</h4>
                <div style="display:flex; gap:10px;">
                    <div style="flex:1;"><label>Pole Position</label><select id="car-pole"><option value="">Ninguno</option></select></div>
                    <div style="flex:1;"><label>Vuelta Rápida (VR)</label><select id="car-vr"><option value="">Ninguno</option></select></div>
                </div>

                <h4 style="color:var(--text-secondary); margin-top:20px;">Clasificación Final (1º al 20º)</h4>
                <div id="carrera-posiciones" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; background: var(--bg-tertiary); padding: 15px; border-radius: 8px;">
                </div>
                
                <label style="display:flex; align-items:center; gap:10px; margin-top:20px; cursor:pointer; background: var(--bg-secondary); padding: 10px; border-radius: 6px;">
                    <input type="checkbox" id="car-completada" style="width:auto; margin:0; transform: scale(1.5);"> 
                    <strong>Marcar como carrera COMPLETADA</strong>
                </label>

                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button type="submit" class="btn-solid" style="flex:1;">Guardar Resultados</button>
                    <button type="button" class="btn-outline" onclick="cerrarModal('modal-carrera')" style="flex:1;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="modal-media" class="modal-overlay">
        <div class="modal-content card">
            <h3 id="titulo-modal-media">Crear Publicación</h3>
            <form id="form-media">
                <input type="hidden" id="med-id">
                <label>Tipo de Contenido</label>
                <select id="med-tipo" required>
                    <option value="articulo">Artículo / Noticia</option>
                    <option value="foto">Fotografía</option>
                    <option value="video">Vídeo</option>
                </select>
                <label>Título</label><input type="text" id="med-titulo" required>
                <label>URL (Obligatorio para Foto/Vídeo)</label><input type="text" id="med-url" placeholder="Ej: assets/img/noticia.jpg">
                <label>Texto (Obligatorio para Artículo)</label><textarea id="med-texto" rows="5" placeholder="Cuerpo de la noticia..."></textarea>
                
                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button type="submit" class="btn-solid" style="flex:1;">Publicar</button>
                    <button type="button" class="btn-outline" onclick="cerrarModal('modal-media')" style="flex:1;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="admin.js"></script>
    <script>
        // Funciones simples para abrir/cerrar modales desde el HTML (por si las necesitas)
        window.abrirModal = function(id) { 
            document.getElementById(id).style.display = 'flex'; 
        }
        window.cerrarModal = function(id) { 
            document.getElementById(id).style.display = 'none'; 
        }
    </script>
</body>
</html>