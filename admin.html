<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F1 Manager - Panel de Control</title>
    <link rel="stylesheet" href="modern.css">
</head>
<body>

    <nav class="navbar">
        <div class="nav-brand"><strong>F1 MANAGER</strong> <span style="color:var(--danger); font-size:0.8rem; margin-left:10px;">[ADMIN]</span></div>
        <ul class="nav-links">
            <li><a href="home.html">Inicio</a></li>
            <li><a href="equipos.html">Equipos</a></li>
            <li><a href="calendario.html">Calendario</a></li>
            <li><a href="clasificacion.html">Clasificación</a></li>
            <li><a href="pilotos.html">Media</a></li>
            <li id="nav-dashboard" style="display: none;"><a href="dashboard.html">Mi Escudería</a></li>
            <li id="nav-admin"><a href="admin.html" class="active">Panel Admin</a></li>
        </ul>
        <div class="nav-auth">
            <button id="btnLogout" class="btn-solid">Cerrar Sesión</button>
        </div>
    </nav>

    <div class="admin-layout">
        
        <aside class="admin-sidebar">
            <button class="admin-tab-btn active" data-target="panel-general">Ajustes y Solicitudes</button>
            <button class="admin-tab-btn" data-target="panel-mensajes">Mensajería FIA</button>
            <button class="admin-tab-btn" data-target="panel-equipos">Gestión Equipos</button>
            <button class="admin-tab-btn" data-target="panel-pilotos">Gestión Pilotos</button>
            <button class="admin-tab-btn" data-target="panel-carreras">Carreras y Resultados</button>
            <button class="admin-tab-btn" data-target="panel-media">Media Center</button>
        </aside>

        <main class="admin-content">

            <section id="panel-general" class="admin-panel active">
                <h2>Estado del Campeonato</h2>
                <div class="card" style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin:0;">Modo Actual: <span id="admin-status-text" style="color:var(--text-secondary);">Cargando...</span></h3>
                        <p style="margin:0; font-size: 0.85rem;">Si está en "Offseason", los equipos sin dueño podrán ser elegidos.</p>
                    </div>
                    <button id="btn-toggle-status" class="btn-outline">Cambiar Estado</button>
                </div>

                <h2 style="margin-top: 30px;">Bandeja de Solicitudes (Mejoras/Fichajes)</h2>
                <div id="admin-solicitudes" class="solicitudes-list">
                    <p class="text-muted">Cargando solicitudes pendientes...</p>
                </div>
            </section>

            <section id="panel-mensajes" class="admin-panel">
                <h2>Enviar Notificación Oficial</h2>
                <div class="card">
                    <form id="form-mensaje">
                        <label>Remitente</label>
                        <select id="msg-remitente">
                            <option value="FIA">FIA (Dirección de Carrera)</option>
                            <option value="Piloto">Piloto</option>
                        </select>
                        
                        <label>Destinatario</label>
                        <select id="msg-destinatario">
                            <option value="todos">Todos los Equipos</option>
                            </select>

                        <label>Mensaje</label>
                        <textarea id="msg-texto" rows="4" placeholder="Escribe el comunicado oficial..." required></textarea>

                        <button type="submit" class="btn-solid">Enviar Mensaje</button>
                    </form>
                </div>
            </section>

            <section id="panel-equipos" class="admin-panel">
                <div style="display:flex; justify-content:space-between; margin-bottom: 20px;">
                    <h2>Equipos Registrados</h2>
                    <button class="btn-outline" onclick="abrirModal('modal-equipo')">+ Nuevo Equipo</button>
                </div>
                <div class="table-container">
                    <table class="admin-table">
                        <thead><tr><th>Nombre</th><th>Color</th><th>Presupuesto</th><th>Acciones</th></tr></thead>
                        <tbody id="tabla-equipos"></tbody>
                    </table>
                </div>
            </section>

            <section id="panel-pilotos" class="admin-panel">
                <div style="display:flex; justify-content:space-between; margin-bottom: 20px;">
                    <h2>Pilotos Registrados</h2>
                    <button class="btn-outline" onclick="abrirModal('modal-piloto')">+ Nuevo Piloto</button>
                </div>
                <div class="table-container">
                    <table class="admin-table">
                        <thead><tr><th>Nombre</th><th>Equipo</th><th>Pts</th><th>Acciones</th></tr></thead>
                        <tbody id="tabla-pilotos"></tbody>
                    </table>
                </div>
            </section>

            <section id="panel-carreras" class="admin-panel">
                <div style="display:flex; justify-content:space-between; margin-bottom: 20px;">
                    <h2>Calendario</h2>
                    <button class="btn-outline" onclick="abrirModal('modal-carrera')">+ Nueva Carrera</button>
                </div>
                <div class="table-container">
                    <table class="admin-table">
                        <thead><tr><th>Ronda</th><th>GP</th><th>Estado</th><th>Acciones</th></tr></thead>
                        <tbody id="tabla-carreras"></tbody>
                    </table>
                </div>
            </section>

            <section id="panel-media" class="admin-panel">
                <div style="display:flex; justify-content:space-between; margin-bottom: 20px;">
                    <h2>Publicaciones</h2>
                    <button class="btn-outline" onclick="abrirModal('modal-media')">+ Nueva Publicación</button>
                </div>
                <div class="table-container">
                    <table class="admin-table">
                        <thead><tr><th>Tipo</th><th>Título</th><th>Acciones</th></tr></thead>
                        <tbody id="tabla-media"></tbody>
                    </table>
                </div>
            </section>

        </main>
    </div>

    <div id="modal-equipo" class="modal-overlay">
        <div class="modal-content card">
            <h3>Datos del Equipo</h3>
            <form id="form-equipo">
                <input type="hidden" id="eq-id">
                <label>Nombre Escudería</label><input type="text" id="eq-nombre" required>
                <label>Color (Hexadecimal)</label><input type="color" id="eq-color" style="height:40px; padding:0;" required>
                <label>Presupuesto Inicial ($)</label><input type="number" id="eq-presupuesto" required>
                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button type="submit" class="btn-solid" style="flex:1;">Guardar</button>
                    <button type="button" class="btn-outline" onclick="cerrarModal('modal-equipo')" style="flex:1;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="admin.js"></script>
    <script>
        // Funciones simples para abrir/cerrar modales desde el HTML
        function abrirModal(id) { document.getElementById(id).style.display = 'flex'; }
        function cerrarModal(id) { 
            document.getElementById(id).style.display = 'none'; 
            // Limpiar form al cerrar
            const form = document.getElementById(id).querySelector('form');
            if(form) form.reset();
        }
    </script>
</body>
</html> 